<hc:Window x:Class="ZJZTQY.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:hc="https://handyorg.github.io/handycontrol" 
        xmlns:local="clr-namespace:ZJZTQY.Converters" 
        mc:Ignorable="d"
        Title="筑建智-请登录筑恒智OA系统平台" Height="800" Width="1200"
        Icon="/Assets/LOGO.ico"  
        ShowTitle="True"
        WindowStartupLocation="CenterScreen"
        WindowStyle="ThreeDBorderWindow">
    <Window.Resources>
        <local:InverseBoolConverter x:Key="InverseBoolConverter"/>
        <local:EmailValidMultiConverter x:Key="EmailValidMultiConverter"/>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="6*"/>
            <ColumnDefinition Width="4*"/>
        </Grid.ColumnDefinitions>
        <Grid Grid.Column="0">
            <Grid.Background>
                <ImageBrush ImageSource="/Assets/LoginWindowLOGO.png" Stretch="UniformToFill" Opacity="0.9"/>
            </Grid.Background>
            <Border Background="#66000000" />
            <StackPanel VerticalAlignment="Center" Margin="40,0">
                <TextBlock HorizontalAlignment="Left" Text="筑恒智" Style="{StaticResource TextBlockLargeBold}" FontSize="35" Foreground="White"/>
                <TextBlock HorizontalAlignment="Left" Text="筑恒基石，智领未来" Style="{StaticResource TextBlockDefault}" FontSize="15" Foreground="White" Margin="0,10,0,35"/>
                <StackPanel>
                    <Border Background="#22FFFFFF" CornerRadius="10" Padding="15" Margin="0,0,0,15">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="⚡" FontSize="24" VerticalAlignment="Center" Margin="0,0,15,0"/>
                            <StackPanel>
                                <TextBlock Text="高效办公" Foreground="White" FontSize="16" FontWeight="SemiBold"/>
                                <TextBlock Text="秒级响应，减少重复劳动" Foreground="#AAFFFFFF" FontSize="12" Margin="0,3,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    <Border Background="#22FFFFFF" CornerRadius="10" Padding="15" Margin="0,0,0,15">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🔁" FontSize="24" VerticalAlignment="Center" Margin="0,0,15,0"/>
                            <StackPanel>
                                <TextBlock Text="全生命周期管理" Foreground="White" FontSize="16" FontWeight="SemiBold"/>
                                <TextBlock Text="覆盖立项、设计、施工、运维全过程" Foreground="#AAFFFFFF" FontSize="12" Margin="0,3,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    <Border Background="#22FFFFFF" CornerRadius="10" Padding="15" Margin="0,0,0,15">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📊" FontSize="24" VerticalAlignment="Center" Margin="0,0,15,0"/>
                            <StackPanel>
                                <TextBlock Text="数据驱动决策" Foreground="White" FontSize="16" FontWeight="SemiBold"/>
                                <TextBlock Text="多维度数据整合，辅助科学决策" Foreground="#AAFFFFFF" FontSize="12" Margin="0,3,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    <Border Background="#22FFFFFF" CornerRadius="10" Padding="15">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🛡️" FontSize="24" VerticalAlignment="Center" Margin="0,0,15,0"/>
                            <StackPanel>
                                <TextBlock Text="安全可靠" Foreground="White" FontSize="16" FontWeight="SemiBold"/>
                                <TextBlock Text="多级权限与加密机制，保障核心数据" Foreground="#AAFFFFFF" FontSize="12" Margin="0,3,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </StackPanel>
        </Grid>
        <Grid Grid.Column="1" 
              Background="#FFFFFF">
            <StackPanel Width="450" 
                        VerticalAlignment="Center" 
                        HorizontalAlignment="Center">
                <TextBlock Text="请登录筑恒智OA系统平台"
                           Style="{StaticResource TextBlockTitleBold}"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="Digital Construction Project Lifecycle Management Platform"
                           Style="{StaticResource TextBlockDefault}"
                           Foreground="{StaticResource SecondaryTextBrush}"
                           FontSize="12"
                           HorizontalAlignment="Center"
                           Margin="0,6,0,30"/>
                <hc:TextBox x:Name="EmailBox" 
                            hc:InfoElement.Title="电子邮箱" 
                            hc:InfoElement.Placeholder="请输入你的电子邮箱" 
                            Margin="0,30,0,20" 
                            Height="60" 
                            hc:InfoElement.Necessary="True" 
                            Style="{StaticResource TextBoxExtend}">
                    <hc:TextBox.Text>
                        <Binding Path="Email" UpdateSourceTrigger="PropertyChanged">
                            <Binding.ValidationRules>
                                <hc:NoBlankTextRule ErrorContent="邮箱不能为空"/>
                                <hc:RegexRule Type="Mail" ErrorContent="邮箱格式不正确"/>
                            </Binding.ValidationRules>
                        </Binding>
                    </hc:TextBox.Text>
                </hc:TextBox>
                <hc:Row Margin="0,10,0,20" VerticalAlignment="Center">
                    <hc:Col Span="18">
                        <hc:TextBox hc:InfoElement.Title="验证码" 
                                    hc:InfoElement.Placeholder="6位数字" 
                                    hc:InfoElement.Necessary="True" 
                                    Height="60" 
                                    Style="{StaticResource TextBoxExtend}" 
                                    Text="{Binding Code, UpdateSourceTrigger=PropertyChanged}"/>
                    </hc:Col>
                    <hc:Col Span="6">
                        <Button Content="{Binding VerifyCodeButtonText}" 
                                Command="{Binding GetCodeCommand}" 
                                Style="{StaticResource ButtonDefault}" 
                                Height="40" 
                                VerticalAlignment="Bottom" 
                                HorizontalAlignment="Right" 
                                Width="100" 
                                Margin="10,0,0,0">
                            <Button.IsEnabled>
                                <MultiBinding Converter="{StaticResource EmailValidMultiConverter}">
                                    <Binding ElementName="EmailBox" Path="Text"/>
                                    <Binding ElementName="EmailBox" Path="(Validation.HasError)"/>
                                    <Binding Path="IsSendingCode"/>
                                </MultiBinding>
                            </Button.IsEnabled>
                        </Button>
                    </hc:Col>
                </hc:Row>
                <CheckBox Content="记住我"
                          IsChecked="{Binding IsRemembered}"
                          Margin="0,0,0,10"
                          Style="{StaticResource CheckBoxBaseStyle}"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,0,0,15" VerticalAlignment="Center">
                    <CheckBox IsChecked="{Binding IsAgreed, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center"  HorizontalAlignment="Center"/>
                    <TextBlock FontSize="12" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Run Text="  我已阅读并同意"/>
                        <Hyperlink Click="OnServicePolicy" Foreground="{DynamicResource PrimaryBrush}">《服务条款》</Hyperlink>
                        <Run Text="和"/>
                        <Hyperlink Click="OnPrivacyPolicy" Foreground="{DynamicResource PrimaryBrush}">《隐私政策》</Hyperlink>
                    </TextBlock>
                </StackPanel>

                <Button Content="登 录 / 注 册" 
                        Command="{Binding LoginCommand}" 
                        Style="{StaticResource ButtonDefault}" 
                        Width="370" 
                        Margin="0,20,0,0" 
                        Height="40"/>
            </StackPanel>
        </Grid>
        <hc:ScrollViewer Grid.ColumnSpan="2" VerticalScrollBarVisibility="Hidden" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,10,10,0" IsHitTestVisible="False">
            <StackPanel hc:Growl.Token="LoginToken" VerticalAlignment="Top"/>
        </hc:ScrollViewer>
    </Grid>
</hc:Window>
    